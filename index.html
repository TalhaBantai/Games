<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Sword Clicker - Fixed Themes</title>
<style>
@font-face {
font-family: 'PixelFont';
src: url('pixel.ttf') format('truetype');
}
body {
font-family: 'PixelFont', sans-serif;
margin: 0;
padding: 0;
text-align: center;
overflow-x: hidden;
background-repeat: no-repeat;
height: 100vh;
}

#btnReset {
position: relative;
left: -17%;
background-color: Red;
}

h1, h2 {
margin: 5px;
}
h2 {
font-size: 12px;
}

#stats {
font-size: 24px;
margin: 10px 0;
}

#clickContainer {
position: relative;
display: inline-block;
}

#btnClick {
font-size: 150px;
margin: 10px 0;
border-radius: 20px;
cursor: pointer;
position: relative;
z-index: 1;
}

#catOnSword {
position: absolute;
width: 70px;
bottom: -9%;
left: -12%;
transform: translateX(-50%);
z-index: 2;
pointer-events: none;
display: none;
}

#buttonContainer {
display: flex;
flex-direction: column;
align-items: center;
gap: 10px;
margin-bottom: 20px;
}

.gameButton {
font-family: 'PixelFont', sans-serif;
font-size: 18px;
padding: 10px 20px;
border: none;
border-radius: 8px;
color: white;
cursor: pointer;
transition: background-color 0.3s ease;
height: 60px;
}

.gameButton:hover {
opacity: 0.9;
}

/* ===== THEMES ===== */
body.default-theme {
background-image: linear-gradient( #0f2027, #203a43, #2c5364);
color: white;
}

body.pink-theme {
background-image: linear-gradient( #F564A9,#FFEDF3);
color: #4b004b;
}

body.red-theme {
background-image: linear-gradient( #2c0b0e, #551014);
color: #ffb6c1;
}

/* ===== SHOP BOX THEMES ===== */
.shopBox.default-theme {
background: rgba(30, 30, 30, 0.9);
border: 2px solid #517da2;
}

.shopBox.pink-theme {
background: rgba(255, 240, 250, 0.9);
border: 2px solid #ff9fd6;
}

.shopBox.red-theme {
background: rgba(60, 10, 10, 0.9);
border: 2px solid #ff5555;
}

/* ===== BUTTON THEMES ===== */
.gameButton.default-theme {
background-color: #517da2;
}
.gameButton.default-theme:hover {
background-color: #395870;
}

.gameButton.pink-theme {
background-color: #ff9fd6;
color: #4b004b;
}
.gameButton.pink-theme:hover {
background-color: #ff69b4;
}

.gameButton.red-theme {
background-color: #8b0000;
color: #ffb6c1;
}
.gameButton.red-theme:hover {
background-color: #b22222;
}

#shopBox {
display: none;
position: fixed;
bottom: 0;
width: 89vw;
height: 70vh;
padding: 20px;
box-shadow: 0 -5px 15px rgba(0,0,0,0.5);
overflow-y: auto;
z-index: 998;
flex-direction: column;
align-items: flex-start;
text-align: left;
border-radius: 10px;
}

.floatText {
position: absolute;
font-size: 20px;
color: gold;
animation: floatUp 0.8s ease-out forwards;
pointer-events: none;
z-index: 1000;
}

@keyframes floatUp {
0% {
opacity: 1;
transform: translateY(0px);
}
100% {
opacity: 0;
transform: translateY(-50px);
}
}

#shopBox img {
width: 100px;
height: auto;
margin-bottom: 10px;
}

#floatContainer {
position: absolute;
top: 0;
left: 0;
width: 100vw;
height: 100vh;
pointer-events: none;
}

#closeShopBtn {
position: sticky;
top: 2%;
left: 90%;
font-size: 20px;
border: none;
border-radius: 50%;
width: 40px;
height: 40px;
cursor: pointer;
z-index: 1000;
}

/* Theme-specific close buttons */
.shopBox.default-theme #closeShopBtn {
background-color: #f05454;
color: white;
}
.shopBox.default-theme #closeShopBtn:hover {
background-color: #c73838;
}

.shopBox.pink-theme #closeShopBtn {
background-color: #ff69b4;
color: #4b004b;
}
.shopBox.pink-theme #closeShopBtn:hover {
background-color: #ff1493;
}

.shopBox.red-theme #closeShopBtn {
background-color: #8b0000;
color: #ffb6c1;
}
.shopBox.red-theme #closeShopBtn:hover {
background-color: #b22222;
}

.shopItem {
display: flex;
align-items: center;
gap: 20px;
margin-top: 10px;
flex-wrap: wrap;
}

.shopItem img {
position: relative;
width: 100px;
height: auto;
margin: 0;
top: -225px;
}

.shopDetails {
flex: 1;
max-width: 500px;
}

#btnBuyPet {
position: relative;
left: -25%;
}

.themebtn {
position: relative;
left: -25%;
color: white;
}

/* Theme-specific sword button */
#btnClick.default-theme {
background-color: #517da2;
}
#btnClick.pink-theme {
background-color: #ff9fd6;
}
#btnClick.red-theme {
background-color: #8b0000;
}
</style>
</head>
<body class="default-theme">
<h1>Sword Clicker</h1>
<h2>Designed and programmed by Talha Khan</h2>

<p id="stats"></p>

<div id="clickContainer">
<button id="btnClick" class="default-theme" onclick="clickIt(event)">üó°Ô∏è</button>
<img id="catOnSword" src="cat.png" alt="Cat on Sword" />
</div>

<div id="buttonContainer">
<button id="btnUpgrade" class="gameButton default-theme" onclick="upgrade(event)">Upgrade</button>
<button id="btnShop" class="gameButton default-theme" onclick="toggleShop()">üõí Shop</button>
</div>

<p id="msg"></p>

<div id="shopBox" class="shopBox default-theme">
<button onclick="toggleShop()" id="closeShopBtn">‚ùå</button>
<h3 id="shopText">Shop</h3>
<h3>Cat Companion üê±</h3>
<div class="shopItem">
<img src="cat.png" alt="Cat">
<div class="shopDetails">
<p>
The cat gives you <strong>3√ó power every second</strong>. Each upgrade increases the multiplier by 1.
</p>
<button id="btnBuyPet" class="gameButton default-theme" onclick="buyPet()"></button>
<h3>Themes üé®</h3>
<div class="shopItem">
<button class="gameButton themebtn default-theme" onclick="applyTheme('default')">Default Theme</button>
<button class="gameButton themebtn default-theme" id="btnPinkTheme" onclick="applyTheme('pink')" disabled>Pink Theme (Unlock pet)</button>
<button class="gameButton themebtn default-theme" id="btnRedTheme" onclick="buyRedTheme()">Buy Red Theme: 250</button>

<button id="btnReset" class="gameButton" onclick="resetGame()">Reset Game</button>
</div>
</div>
</div>
</div>

<div id="floatContainer"></div>
</body>
<script>
let coins = 0;
let power = 1;
let cost = 10;
let petOwned = false;
let petUpgradeCost = 500;
let petMultiplier = 2;
let autoInterval = null;
let redThemeOwned = false;
let currentTheme = 'default';

function updShop() {
if (!petOwned) {
document.getElementById("btnBuyPet").innerText = `Buy a  Cat: ${petUpgradeCost}`;

} else {
document.getElementById("btnBuyPet").innerText = `Upgrade: ${petUpgradeCost}`;
document.getElementById("btnPinkTheme").innerText = "Apply Pink Theme"
}
}


// Background music
const sndAria = new Audio('ariaMath.mp3');
const sndSweden = new Audio('sweden.mp3');
let currentMusic = sndAria;

// Sound effects
const sndMeow = new Audio('meow.mp3');
const sndHurt = new Audio('hurt.wav');
const sndSlash = new Audio('slash.wav');
const sndClick = new Audio('clickwav');

// Music loop: play one, then the other
sndAria.addEventListener("ended", () => {
currentMusic = sndSweden;
currentMusic.play();
});
sndSweden.addEventListener("ended", () => {
currentMusic = sndAria;
currentMusic.play();
});
currentMusic.loop = false;
currentMusic.play();

// Initialize theme
applyTheme(currentTheme);
updateStats();

function updateStats() {
if (!petOwned) {
document.getElementById("stats").innerHTML = ` Coins: ${coins}<br> Power: ${power}<br>Pet Strength: None`;
} else {
document.getElementById("stats").innerHTML = ` Coins: ${coins}<br> Power: ${power}<br>Pet Strength: ${petMultiplier}`;
}
document.getElementById("btnUpgrade").innerText = `Upgrade (${cost} coins)`;
}



function clickIt(event) {
coins += power;
saveGame();
sndSweden.play();
spawnFloatText(event.clientX, event.clientY, `+${power}`);
updateStats();
}

function upgrade(event) {
if (coins >= cost) {
coins -= cost;
saveGame();
sndSweden.play();
sndSlash.play();
cost = Math.floor(cost * 1.5);
power += 1;
spawnFloatText(event.clientX, event.clientY, "Upgraded!");
} else {
sndHurt.play();
spawnFloatText(event.clientX, event.clientY, "‚ùå Not enough coins");
}
updateStats();
}

function toggleShop() {
const shop = document.getElementById("shopBox");
updShop();
sndSweden.play();
shop.style.display = (shop.style.display === "none" || shop.style.display === "") ? "block": "none";
}

function buyPet() {
if (coins >= petUpgradeCost) {
coins -= petUpgradeCost;
petUpgradeCost = Math.floor(petUpgradeCost * 1.5);
petOwned = true;
saveGame();
unlockPinkTheme();
petMultiplier += 1;
sndMeow.play();
document.getElementById("btnBuyPet").innerText = `Upgrade Pet: ${petUpgradeCost} coins`;
spawnFloatText(window.innerWidth / 2, window.innerHeight / 2, "Pet upgraded!");
document.getElementById("btnPinkTheme").innerText = "Apply Pink Theme ";
sndSweden.play();
// Show cat image resting on sword
const catImg = document.getElementById("catOnSword");
catImg.style.display = "block";

// Start auto collection
if (!autoInterval) {
autoInterval = setInterval(() => {
coins += power * petMultiplier;
updateStats();
const sword = document.getElementById("btnClick");
const rect = sword.getBoundingClientRect();
const x = rect.left + rect.width / 2;
const y = rect.top + rect.height / 2;
spawnFloatText(x, y, `+${power * petMultiplier}`);
}, 1000);
}

updateStats();
} else {
sndHurt.play();
spawnFloatText(window.innerWidth / 2, window.innerHeight / 2, "‚ùå Not enough coins");
}
}

function spawnFloatText(x, y, text) {
const float = document.createElement("div");
float.className = "floatText";
float.innerText = text;
float.style.left = (x + (Math.random() - 0.5) * 20) + "px";
float.style.top = (y - 30 + (Math.random() - 0.5) * 20) + "px";
document.getElementById("floatContainer").appendChild(float);
setTimeout(() => float.remove(), 800);
}

// Apply theme to all elements
function applyTheme(theme) {
// Update body theme
document.body.className = `${theme}-theme`;

// Update shopBox theme
const shopBox = document.getElementById("shopBox");
shopBox.className = `shopBox ${theme}-theme`;

// Update all buttons
document.querySelectorAll(".gameButton").forEach(btn => {
// Remove existing theme classes
btn.classList.remove("default-theme", "pink-theme", "red-theme");
// Add new theme class
btn.classList.add(`${theme}-theme`);
});

// Update sword button
const swordBtn = document.getElementById("btnClick");
swordBtn.className = `${theme}-theme`;

currentTheme = theme;
}

function unlockPinkTheme() {
const btn = document.getElementById("btnPinkTheme");
btn.disabled = false;
btn.classList.remove("default-theme");
btn.classList.add("pink-theme");
}

function buyRedTheme() {
if (redThemeOwned) {
applyTheme('red');
return;
}

if (coins >= 250) {
coins -= 250;
redThemeOwned = true;
applyTheme('red');
document.getElementById("btnRedTheme").innerText = "Apply Red Theme";
updateStats();
spawnFloatText(window.innerWidth / 2, window.innerHeight / 2, "Red theme unlocked!");
} else {
sndHurt.play();
spawnFloatText(window.innerWidth / 2, window.innerHeight / 2, "‚ùå Not enough coins");
}
}

// Cat click to meow
document.getElementById("catOnSword").style.pointerEvents = "auto";
const catImg = document.getElementById("catOnSword");

catImg.addEventListener("click", (e) => {
sndMeow.play();
spawnFloatText(e.clientX, e.clientY, "‚ù§Ô∏è");
});

catImg.addEventListener("touchstart", (e) => {
e.preventDefault(); // Prevents double trigger (ghost click)
sndMeow.play();
const x = e.touches[0].clientX;
const y = e.touches[0].clientY;
spawnFloatText(x, y, "‚ù§Ô∏è");
});

// Save game state to localStorage
function saveGame() {
const gameState = {
coins: coins,
power: power,
cost: cost,
petOwned: petOwned,
petUpgradeCost: petUpgradeCost,
petMultiplier: petMultiplier,
redThemeOwned: redThemeOwned,
currentTheme: currentTheme
};
localStorage.setItem('swordClickerSave', JSON.stringify(gameState));
}

// Load game state from localStorage
function loadGame() {
const savedGame = localStorage.getItem('swordClickerSave');
if (savedGame) {
const gameState = JSON.parse(savedGame);

coins = gameState.coins || 0;
power = gameState.power || 1;
cost = gameState.cost || 10;
petOwned = gameState.petOwned || false;
petUpgradeCost = gameState.petUpgradeCost || 500;
petMultiplier = gameState.petMultiplier || 3;
redThemeOwned = gameState.redThemeOwned || false;
currentTheme = gameState.currentTheme || 'default';

// Apply loaded state to the game
if (petOwned) {
document.getElementById("catOnSword").style.display = "block";
unlockPinkTheme();

// Restart auto collection if needed
if (!autoInterval) {
autoInterval = setInterval(autoCollect, 1000);
}
}

if (redThemeOwned) {
document.getElementById("btnRedTheme").innerText = "Apply Red Theme";
}

applyTheme(currentTheme);
updateStats();
}
}

// Auto-collect function (separated for clarity)
function autoCollect() {
if (petOwned) {
coins += power * petMultiplier;
updateStats();
const sword = document.getElementById("btnClick");
const rect = sword.getBoundingClientRect();
const x = rect.left + rect.width / 2;
const y = rect.top + rect.height / 2;
spawnFloatText(x, y, `+${power * petMultiplier}`);
}
}



function resetGame() {
if (confirm("Are you sure you want to reset all progress?")) {
localStorage.removeItem('swordClickerSave');
location.reload();
}
}
window.addEventListener('load', function() {
loadGame();

setInterval(saveGame, 30000);
});

</script>

</html>